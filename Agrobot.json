{
  "name": "Agrobot - Mais Atualizado",
  "nodes": [
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.text }}",
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        688,
        0
      ],
      "id": "d9989071-e751-4005-8fdf-02ac31a3de48",
      "name": "Basic LLM Chain"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "claude-sonnet-4-20250514",
          "cachedResultName": "Claude 4 Sonnet"
        },
        "options": {
          "thinking": true
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatAnthropic",
      "typeVersion": 1.3,
      "position": [
        768,
        224
      ],
      "id": "74a58037-0899-4ed0-807f-85ac7b792de7",
      "name": "Anthropic Chat Model",
      "credentials": {
        "anthropicApi": {
          "id": "Cp3EHtoCdDQtuz03",
          "name": "Anthropic account"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.message.voice.file_id }}",
                    "rightValue": "",
                    "operator": {
                      "type": "string",
                      "operation": "exists",
                      "singleValue": true
                    },
                    "id": "bba2a502-2d6b-44e8-b539-752de2ed7218"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "vozOuvida"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "dd401752-1890-4698-b472-577c50beb0c7",
                    "leftValue": "={{ $json.message.text }}",
                    "rightValue": "",
                    "operator": {
                      "type": "string",
                      "operation": "exists",
                      "singleValue": true
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "textoLido"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        -320,
        320
      ],
      "id": "d62f0745-99d9-4a89-a2b6-3ff5b032ecf6",
      "name": "Switch"
    },
    {
      "parameters": {
        "url": "=https://api.assemblyai.com/v2/transcript/{{ $json.id }}",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "8f40491b243146c9902404778c75b609"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        448,
        0
      ],
      "id": "a7ad1867-aa56-4143-ae87-8c577730df3f",
      "name": "GET Transcrição"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.assemblyai.com/v2/transcript",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "8f40491b243146c9902404778c75b609"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "audio_url",
              "value": "={{ $json.upload_url }}"
            },
            {
              "name": "language_code",
              "value": "pt"
            },
            {
              "name": "speech_model",
              "value": "best"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        240,
        0
      ],
      "id": "ce8b5b3a-eed6-41c9-acf1-cd125b60d484",
      "name": "POST Arquivo Baixado"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.assemblyai.com/v2/upload",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "8f40491b243146c9902404778c75b609"
            },
            {
              "name": "Content-Type",
              "value": "application/octet-stream"
            }
          ]
        },
        "sendBody": true,
        "contentType": "binaryData",
        "inputDataFieldName": "data",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        0,
        0
      ],
      "id": "037ebbb5-2be3-421b-8923-efddf858655f",
      "name": "POST Assembly AI"
    },
    {
      "parameters": {
        "resource": "file",
        "fileId": "={{ $json.message.voice.file_id }}",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -192,
        144
      ],
      "id": "4e47adc3-1199-4053-b3a9-01b21a649a07",
      "name": "Baixando Arquivo",
      "webhookId": "9366bd04-f5f5-4864-9ef8-4fb0cdfe03d6",
      "credentials": {
        "telegramApi": {
          "id": "fEtoW3pfs5vTme4C",
          "name": "Telegram Account Agrobot"
        }
      }
    },
    {
      "parameters": {
        "updates": [
          "message"
        ],
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegramTrigger",
      "typeVersion": 1.2,
      "position": [
        -528,
        320
      ],
      "id": "a1ec4a8c-90e0-498d-a5dd-c716c7a53cda",
      "name": "Gatilho Telegram",
      "webhookId": "d5699c14-f8de-4dbe-aba1-51f4f85faaa8",
      "credentials": {
        "telegramApi": {
          "id": "fEtoW3pfs5vTme4C",
          "name": "Telegram Account Agrobot"
        }
      }
    },
    {
      "parameters": {
        "resource": "speech",
        "voice": {
          "__rl": true,
          "value": "5Q0t7uMcjvnagumLfvZi",
          "mode": "list",
          "cachedResultName": "Paul"
        },
        "text": "={{ $json.data[1].text }}",
        "additionalOptions": {
          "model": {
            "mode": "list",
            "value": "eleven_multilingual_v2"
          },
          "outputFormat": "mp3_44100_128",
          "languageCode": "pt",
          "voiceSettings": "{\n  \"stability\": 1,\n  \"similarity_boost\": 1,\n  \"style\": 0,\n  \"use_speaker_boost\": true,\n  \"speed\": 1\n}"
        },
        "requestOptions": {}
      },
      "type": "@elevenlabs/n8n-nodes-elevenlabs.elevenLabs",
      "typeVersion": 1,
      "position": [
        1040,
        0
      ],
      "id": "bc03fced-783b-4290-bf1e-d043ebbe3ab9",
      "name": "Convert text to speech",
      "credentials": {
        "elevenLabsApi": {
          "id": "oYjdbb1mpqWIMa7q",
          "name": "ElevenLabs account"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "Anthropic Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Basic LLM Chain",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Basic LLM Chain": {
      "main": [
        [
          {
            "node": "Convert text to speech",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch": {
      "main": [
        [
          {
            "node": "Baixando Arquivo",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GET Transcrição": {
      "main": [
        [
          {
            "node": "Basic LLM Chain",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "POST Arquivo Baixado": {
      "main": [
        [
          {
            "node": "GET Transcrição",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "POST Assembly AI": {
      "main": [
        [
          {
            "node": "POST Arquivo Baixado",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Baixando Arquivo": {
      "main": [
        [
          {
            "node": "POST Assembly AI",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gatilho Telegram": {
      "main": [
        [
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "5babaa76-78e5-44be-a39d-125c70841f1e",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "0745f470424028f5b545f358433257dc798d5cc79f7c3eac7a4cea2cc04bbb2d"
  },
  "id": "2FIuuTrQCzKZ2zuW",
  "tags": []
}